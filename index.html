<!DOCTYPE html>
<html lang="en">
	<head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
        <title>mScan Template Maker</title>
        
        <!-- For jcrop -->
        <script src="jcrop/js/jquery.min.js" type="text/javascript"></script>
        <script src="jcrop/js/jquery.Jcrop.js" type="text/javascript"></script>
        <link rel="stylesheet" href="jcrop/css/jquery.Jcrop.css" type="text/css" />
        <!-- <link rel="stylesheet" href="jcrop/demos/demo_files/demos.css" type="text/css" />-->
        
        <!-- For tabs and draggables (TODO: put this in separate directory)-->
        <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
        <script type="text/javascript" src="js/jquery-ui-1.8.16.custom.min.js"></script>
        
        <!-- For json deserialization -->
        <script type="text/javascript" src="js/json2.js"></script>
        
        <!-- Image load -->
        <script src="assets/js/jquery.filedrop.js"></script>
        <!-- <script src="assets/js/script.js"></script> -->
        
        <script src="js/jsonlint.js"></script>
        
        <!-- Onde 
        <link rel="stylesheet" href="onde/src/onde.css" type="text/css"/>
        <script type="text/javascript" src="onde/src/onde.js"></script>
        -->
        <!-- Ace -->
        <script src="ace-builds/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
        
        <!-- For me -->
        <script type="text/javascript" src="js/mScanTemplateMaker.js"></script>
        <script type="text/javascript" src="js/jsonPage.js"></script>
        <script type="text/javascript" src="js/imageUpload.js"></script>
        <link rel="stylesheet" href="css/mScanTemplateMaker.css" type="text/css" />
	</head>
<body>
<div id="tabs">
	<ul>
		<li><a href="#jsonEditor">Edit Template JSON</a></li>
		<li><a href="#rendered">Render Template</a></li>
        <!-- <li><a href="#jsonGUI">JSON GUI</a></li> -->
        <li><a href="#test">Test Template</a></li>
        <li><a href="#tips">Help</a></li>
        <li class="devtab"><a href="#acknowledgements">Software info</a></li>
	</ul>

    <div id="jsonEditor">
        <div id="editor" class="editor"></div>
        <pre id="validation-message" class="validation-message"></pre>
        
        <button id="save">Save</button><br />
        <div class="well">
            <label>Offset x:</label>
            <input class="offset_x" value=0></input><br />
            <label>Offset y:</label>
            <input class="offset_y" value=0></input><br />
            <label>Scale x:</label>
            <input class="scale_x" value=1></input><br />
            <label>Scale y:</label>
            <input class="scale_y" value=1></input><br />
            <button id="transform" onclick='transformFunction()'>Transform</button><br />
        </div>
        <!-- <button id="convert" onclick='convertToNewSchema()'>Convert To New Schema Format</button> -->
	</div>
	<div id="rendered">
    		<div id="coords" class="coords">
                <button style="display:block;" id="add_field">Update Field</button>
                <textarea style="display:block;" id="json_out" rows="20" cols="30"></textarea>
			</div>

			<!-- This is the image we're attaching Jcrop to -->
			<div id="dropbox">
			    <img id="target" class="target" alt="form" />
			</div>
	</div>
    <!--
    <div id="jsonGUI">
        <form id="data-entry-form">
          <div class="onde-panel"></div>
          <p class="actions"><button type="submit" name="submit">Debug</button></p>
        </form>
    </div>
    -->
    <div id="test">
        <form method="post" action="http://174.129.255.189/test_template" target="_blank">
            <input type="hidden" name="sessionToken">
            <input type="submit" value="Preview">
        </form>
        <button id="uploadTemplate">Upload Current Template</button>
        <div id="templateStatus" class="status">templateStatus</div>
        <div id="testImageDrop">
            <p>Drop your test image here.</p>
            <div id="testImageStatus" class="status">testImageStatus</div>
            <img id="testImage" alt="testImage" />
        </div>
    </div>
    <div id="tips">
        <h1>Tips:</h1>
        <ul>
            <li>To change the form image drag and drop the new image over the current image.</li>
            <li>Segments should cover only the fillable areas of the form.</li>
            <li>Leave about a pixel of whitespace padding around every bubble/checkbox.</li>
            <li>If your form is too big to fit on your screen try using your browser's zoom function. (Pressing Ctrl and plus/minus is what does it for me.)</li>
            <li>If your form has a landscape orientation we don't yet support it.</li>
        </ul>
    </div>
    <div id="acknowledgements">
        <div>
            <a href="https://github.com/nathanathan/TemplateMaker">Template Editor Source</a><br />
            <a href="https://github.com/nathanathan/ODKScan-cores">ODK Scan</a><br />
            <p>Components:</p>
            <a href="http://jquery.com/">jQuery</a><br />
            <a href="http://deepliquid.com/content/Jcrop.html">Jcrop</a><br />
            <a href="http://ace.ajax.org/">Ace</a><br />
            <a href="https://github.com/nathanathan/onde">Onde</a><br />
        </div>
    </div>
</div>
</body>
</html>